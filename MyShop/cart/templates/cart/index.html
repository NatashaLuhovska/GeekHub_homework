{% extends 'ui/base.html' %}

{% block content %}
    <h3>Cart</h3>
    <hr>
    {% for product in products %}
    <div>
        <p>Title: {{product.title}} </p>
        <p>Price: {{product.current_price}}</p>
        <p>View details: <a href="{% url 'products:details' product.id %}" target="_blank">View...</a></p>
        <p>Added quantity: {{product.in_cart_quantity}}</p>
        <form action="{% url 'cart:change-quantity' %}" method="post">
            {% csrf_token %}
            <h4>Change quantity</h4>
            {{ product.form_q }}
            <button type="submit">Change</button>
        </form>
        <br>
        <form action="{% url 'cart:remove-product-of-cart' %}" method="post">
            {% csrf_token %}
            {{ product.form_id }}
            <button type="submit">Remove product of cart</button>
        </form>
        <hr>
    </div>

    {% empty %}
        <p>You cart is empty.</p>
    {%endfor%}
    <h2>Total price in cart: {{ total_price }}</h2>
    {% if products %}
    <hr>
    <form action="{% url 'cart:clear-cart' %}" method="post">
        {% csrf_token %}
        <button type="submit">Clear cart</button>
    </form>
    {% endif %}
    <hr>
{% endblock %}